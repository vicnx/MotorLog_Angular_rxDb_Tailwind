"use strict";(self.webpackChunkmotorlog=self.webpackChunkmotorlog||[]).push([[495],{7495:(S,u,t)=>{t.r(u),t.d(u,{VehicleDetailsComponent:()=>P});var v=t(177),e=t(4438),a=t(9417),p=t(3955),I=t(9644),C=t(6554),b=t(1141),_=t(9240),g=t(8833),E=t(1802),f=t(2242),F=t(5901),R=t(9629),D=t(5779);const d=()=>({width:"100%"});function M(i,o){1&i&&(e.j41(0,"div",18),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"pages.add-vehicle.validations.vehicle_name_required")," "))}function T(i,o){1&i&&(e.j41(0,"div",18),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"pages.add-vehicle.validations.brand_required")," "))}function O(i,o){1&i&&(e.j41(0,"div",18),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"pages.add-vehicle.validations.model_required")," "))}function $(i,o){1&i&&e.nrm(0,"i"),2&i&&e.HbH(o.$implicit)}function k(i,o){1&i&&(e.j41(0,"div",18),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"pages.add-vehicle.validations.icono_required")," "))}let P=(()=>{class i extends I.${constructor(){super(...arguments),this.optionsBrands=[],this.optionsIcons=[],this.formBuilder=(0,e.WQX)(a.ok),this.vehiclesApiSvc=(0,e.WQX)(R.$),this.isConsulta=!1}ngOnInit(){this.routeSvc.data.subscribe(n=>{this.isConsulta=n.isConsulta}),this.userSvc.page.update(n=>this.isConsulta?"pages.vehicle-details.title":"pages.add-vehicle.title"),this.initForm()}onSubmit(){console.log(this.vehicleForm.value),this.vehicleForm.valid?this.isConsulta?this.editVehicle():this.newVehicle():this.markFieldsAsTouched(this.vehicleForm)}newVehicle(){this.vehicleSvc.addVehicle(this.vehicleForm.value).subscribe({next:n=>{this.operationOK()}})}editVehicle(){this.vehicleSvc.updateVehicle(this.vehicleData.id,this.vehicleForm.value).subscribe({next:n=>{this.operationOK()}})}operationOK(){this.showSuccess(),this.vehicleSvc.getSavedVehicles(),this.routerSvc.navigate([this.const.routes.vehiclesList])}initForm(){this.vehicleForm=this.formBuilder.group({nombreVehiculo:["",a.k0.required],marca:["",a.k0.required],modelo:["",a.k0.required],year:["",[a.k0.max(9999)]],color:["#ff0000"],imagen:[{value:"",disabled:!0}],imagenMarca:[{value:"",disabled:!0}],cc:["",[a.k0.max(9999)]],cv:["",[a.k0.max(999)]],icono:["",a.k0.required],observaciones:["",a.k0.maxLength(200)]}),this.isConsulta&&(this.spinnerSvc.show(),this.routeSvc.paramMap.subscribe(n=>{const s=n.get("id");s&&this.vehicleSvc.getVehicleById(s).then(l=>{l?(this.vehicleData=l.toJSON(),this.vehicleForm.patchValue(this.vehicleData)):this.routerSvc.navigate(["/vehicle-list"]),this.spinnerSvc.hide()})})),this.loadIcons(),this.loadDropdowns()}loadIcons(){this.vehicleSvc.getVehicleIcons().subscribe({next:n=>{this.optionsIcons=n.vehicle_icons}})}loadDropdowns(){this.vehicleSvc.getVehicleBrands().subscribe({next:n=>{this.optionsBrands=n}})}static{this.\u0275fac=(()=>{let n;return function(l){return(n||(n=e.xGo(i)))(l||i)}})()}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-add-vehicle"]],standalone:!0,features:[e.Vt3,e.aNF],decls:64,vars:83,consts:[[1,"mx-auto","max-w-md","sm:max-w-screen-md","px-6","sm:pt-6","sm:pb-4","my-0","sm:my-5","bg-white","border-0","shadow-lg","sm:rounded-3xl"],[1,"container","mx-auto","max-w-screen-md"],[1,"p-4",3,"ngSubmit","formGroup"],[1,"mb-4"],[1,"block","text-gray-700","text-sm","font-bold","mb-2"],["pInputText","","type","text","formControlName","nombreVehiculo",1,"w-full",3,"placeholder","disabled"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["formControlName","marca","optionLabel","name","optionValue","code","filterBy","name",3,"options","placeholder","filter","showClear","disabled"],["pInputText","","type","text","formControlName","modelo","maxlength","25",1,"w-full",3,"placeholder","disabled"],["id","year","formControlName","year",1,"w-full",3,"min","max","disabled","useGrouping"],["formControlName","color",3,"disabled"],["pInputText","","type","file","accept","image/*","formControlName","imagen",1,"w-full",3,"disabled"],["id","cc","formControlName","cc","mode","decimal",1,"w-full",3,"min","max","disabled"],["id","cv","formControlName","cv","mode","decimal",1,"w-full",3,"min","max","disabled"],["optionLabel","icon","formControlName","icono",3,"options","disabled"],["pTemplate",""],["rows","3","formControlName","observaciones","maxlength","50",1,"p-2","border","border-gray-300","rounded-md","w-full",3,"placeholder","disabled"],["type","submit",3,"label"],[1,"text-red-500","text-sm","mt-1"]],template:function(s,l){if(1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"form",2),e.bIt("ngSubmit",function(){return l.onSubmit()}),e.j41(3,"div",3)(4,"label",4),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.nrm(7,"input",5),e.nI1(8,"translate"),e.DNE(9,M,3,3,"div",6),e.k0s(),e.j41(10,"div",3)(11,"label",4),e.EFF(12),e.nI1(13,"translate"),e.k0s(),e.nrm(14,"p-dropdown",7),e.nI1(15,"translate"),e.DNE(16,T,3,3,"div",6),e.k0s(),e.j41(17,"div",3)(18,"label",4),e.EFF(19),e.nI1(20,"translate"),e.k0s(),e.nrm(21,"input",8),e.nI1(22,"translate"),e.DNE(23,O,3,3,"div",6),e.k0s(),e.j41(24,"div",3)(25,"label",4),e.EFF(26),e.nI1(27,"translate"),e.k0s(),e.nrm(28,"p-inputNumber",9),e.k0s(),e.j41(29,"div",3)(30,"label",4),e.EFF(31),e.nI1(32,"translate"),e.k0s(),e.nrm(33,"p-colorPicker",10),e.k0s(),e.j41(34,"div",3)(35,"label",4),e.EFF(36),e.nI1(37,"translate"),e.k0s(),e.nrm(38,"input",11),e.k0s(),e.j41(39,"div",3)(40,"label",4),e.EFF(41),e.nI1(42,"translate"),e.k0s(),e.nrm(43,"p-inputNumber",12),e.k0s(),e.j41(44,"div",3)(45,"label",4),e.EFF(46),e.nI1(47,"translate"),e.k0s(),e.nrm(48,"p-inputNumber",13),e.k0s(),e.j41(49,"div",3)(50,"label",4),e.EFF(51),e.nI1(52,"translate"),e.k0s(),e.j41(53,"p-selectButton",14),e.DNE(54,$,1,2,"ng-template",15),e.k0s(),e.DNE(55,k,3,3,"div",6),e.k0s(),e.j41(56,"div",3)(57,"label",4),e.EFF(58),e.nI1(59,"translate"),e.k0s(),e.nrm(60,"textarea",16),e.nI1(61,"translate"),e.k0s(),e.nrm(62,"p-button",17),e.nI1(63,"translate"),e.k0s()()()),2&s){let r,m,c,h;e.R7$(2),e.Y8G("formGroup",l.vehicleForm),e.R7$(3),e.JRh(e.bMT(6,49,"pages.add-vehicle.vehicle_name")),e.R7$(2),e.Y8G("placeholder",e.bMT(8,51,"pages.add-vehicle.vehicle_name"))("disabled",l.isConsulta),e.R7$(2),e.Y8G("ngIf",(null==l.vehicleForm||null==(r=l.vehicleForm.get("nombreVehiculo"))?null:r.invalid)&&(null==l.vehicleForm||null==(r=l.vehicleForm.get("nombreVehiculo"))?null:r.touched)),e.R7$(3),e.JRh(e.bMT(13,53,"pages.add-vehicle.brand")),e.R7$(2),e.Aen(e.lJ4(79,d)),e.Y8G("options",l.optionsBrands)("placeholder",e.bMT(15,55,"pages.add-vehicle.brand_placeholder"))("filter",!0)("showClear",!0)("disabled",l.isConsulta),e.R7$(2),e.Y8G("ngIf",(null==l.vehicleForm||null==(m=l.vehicleForm.get("marca"))?null:m.invalid)&&(null==l.vehicleForm||null==(m=l.vehicleForm.get("marca"))?null:m.touched)),e.R7$(3),e.JRh(e.bMT(20,57,"pages.add-vehicle.model")),e.R7$(2),e.Y8G("placeholder",e.bMT(22,59,"pages.add-vehicle.model"))("disabled",l.isConsulta),e.R7$(2),e.Y8G("ngIf",(null==l.vehicleForm||null==(c=l.vehicleForm.get("modelo"))?null:c.invalid)&&(null==l.vehicleForm||null==(c=l.vehicleForm.get("modelo"))?null:c.touched)),e.R7$(3),e.JRh(e.bMT(27,61,"pages.add-vehicle.year")),e.R7$(2),e.Aen(e.lJ4(80,d)),e.Y8G("min",0)("max",9999)("disabled",l.isConsulta)("useGrouping",!1),e.R7$(3),e.JRh(e.bMT(32,63,"pages.add-vehicle.color")),e.R7$(2),e.Y8G("disabled",l.isConsulta),e.R7$(3),e.JRh(e.bMT(37,65,"pages.add-vehicle.imagen")),e.R7$(2),e.Y8G("disabled",l.isConsulta),e.R7$(3),e.JRh(e.bMT(42,67,"pages.add-vehicle.cc")),e.R7$(2),e.Aen(e.lJ4(81,d)),e.Y8G("min",0)("max",9999)("disabled",l.isConsulta),e.R7$(3),e.JRh(e.bMT(47,69,"pages.add-vehicle.cv")),e.R7$(2),e.Aen(e.lJ4(82,d)),e.Y8G("min",0)("max",999)("disabled",l.isConsulta),e.R7$(3),e.JRh(e.bMT(52,71,"pages.add-vehicle.icon")),e.R7$(2),e.Y8G("options",l.optionsIcons)("disabled",l.isConsulta),e.R7$(2),e.Y8G("ngIf",(null==l.vehicleForm||null==(h=l.vehicleForm.get("icono"))?null:h.invalid)&&(null==l.vehicleForm||null==(h=l.vehicleForm.get("icono"))?null:h.touched)),e.R7$(3),e.JRh(e.bMT(59,73,"pages.add-vehicle.observ")),e.R7$(2),e.Y8G("placeholder",e.bMT(61,75,"pages.add-vehicle.observ"))("disabled",l.isConsulta),e.R7$(2),e.Y8G("label",e.bMT(63,77,"pages.add-vehicle.save"))}},dependencies:[v.MD,v.bT,p.h,p.D9,C.PO,f.u,f.S,g.kr,g.ms,D.Ei,a.YN,a.qT,a.me,a.BC,a.cb,a.tU,a.X1,a.j4,a.JD,b.tm,b.$n,F.xs,F.JC,_.YG,_.sk,E.O3,E.YI],encapsulation:2})}}return i})()}}]);